title: "Speedrun Cuts"
output: "speedrun_cuts"
variables:
  demo_dir: "{{tmp_dir}}/tds_speedrun_cuts"
settings:
  width: 1360
  height: 840
  font_size: 22
  theme: "Dracula"
  padding: 24
  window_bar: "Colorful"
  framerate: 60
  line_height: 1.15
  letter_spacing: 0
preinstall:
  - "rm -rf {{demo_dir}} && mkdir -p {{demo_dir}}"
  - |
    cat > {{demo_dir}}/release_gate.sh <<'SH'
    echo "lint:ok"
    echo "types:ok"
    echo "tests:ok"
    echo "package:ok"
    echo "publish:ready"
    SH
  - "chmod +x {{demo_dir}}/release_gate.sh"
scenarios:
  - label: "Speedrun"
    surface: "terminal"
    prompt:
      style: "venv"
      env: ".venv"
      user: "dev"
      host: "workstation"
      path: "basename"
      symbol: "$"
    setup:
      - "cd {{demo_dir}}"
      - "clear"
    actions:
      - type: "./release_gate.sh"
      - wait_for: "lint:ok"
        wait_mode: "screen"
        wait_timeout: "5s"
      - wait_for: "publish:ready"
        wait_mode: "screen"
        wait_timeout: "5s"
      - sleep: "600ms"
